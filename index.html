<!DOCTYPE html>
<html lang="en"> <head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>$PUMPDIT - Weaponized Influence</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    /* Default is now GREEN TERMINAL ("light mode") */
    body {
      --color-bg-primary: #000000;
      --color-bg-secondary: #0a0a0a;
      --color-bg-tertiary: #0f0f0f;
      --color-border: #00ff00;
      --color-text-primary: #00ff00;
      --color-text-secondary: #00bb00;
      --color-accent-orange: #00ff00;
      --color-accent-green: #33ff33;
      --color-accent-red: #33ff33;
      --color-accent-cyan: #33ff33;
      --color-accent-purple: #33ff33;
      --glitch-1: lime; --glitch-2: green; --glitch-3: #ffffff; --glitch-4: darkgreen;

      background-color: var(--color-bg-primary);
      color: var(--color-text-primary);
      font-family: 'Press Start 2P', cursive;
      overflow-x: hidden;
    }
    /* DARK MODE overrides */
    html.dark body {
      --color-bg-primary: #0d0b14;
      --color-bg-secondary: #1a1823;
      --color-bg-tertiary: #13111B;
      --color-border: #2C2A37;
      --color-text-primary: #ffffff;
      --color-text-secondary: #9ca3af;
      --color-accent-orange: #ff4500;
      --color-accent-green: #10B981;
      --color-accent-red: #EF4444;
      --color-accent-cyan: #22d3ee;
      --color-accent-purple: #a855f7;
      --glitch-1: red; --glitch-2: blue; --glitch-3: lime; --glitch-4: magenta;
    }
    
    html { scroll-behavior: smooth; }
    h1, h2, h3, p, li, button, a, span, label, select, input, option { font-family: 'Press Start 2P', cursive; }
    
    @keyframes glitch-anim {
      0% { text-shadow: 2px 0 var(--glitch-1), -2px 0 var(--glitch-2); }
      50% { text-shadow: -2px -2px var(--glitch-3), 2px 2px var(--glitch-4); }
      100% { text-shadow: 2px 0 var(--glitch-1), -2px 0 var(--glitch-2); }
    }
    .glitch-effect:hover { animation: glitch-anim 1s infinite; }
    
    #hero-headline { border-right: 0.15em solid var(--color-accent-orange); white-space: nowrap; overflow: hidden; }
    .typing-anim { animation: typing 2s steps(20, end), blink-caret .75s step-end infinite; }
    @keyframes typing { from { width: 0 } to { width: 100% } }
    @keyframes blink-caret { from, to { border-color: transparent } 50% { border-color: var(--color-accent-orange); } }
    
    .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: none; align-items: center; justify-content: center; z-index: 1000; }
    .modal-content { background-color: var(--color-bg-secondary); padding: 2rem; border: 1px solid var(--color-accent-orange); border-radius: 1rem; text-align: center; max-width: 90%; width: 500px; }
    .btn-glow { box-shadow: 0 0 10px var(--color-accent-orange), 0 0 30px #ff8717; transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out; }
    html.light .btn-glow { box-shadow: 0 0 10px var(--color-accent-orange), 0 0 20px var(--color-accent-orange); }
    .btn-glow:hover { transform: scale(1.05); }
    .btn-glow:active { transform: scale(0.98); }
    .section-divider { height: 2px; background: linear-gradient(to right, var(--color-border), var(--color-accent-orange), var(--color-border)); margin: 6rem auto; width: 80%; }
    .section-block { padding-top: 4rem; padding-bottom: 4rem; }
    .gradient-text { background: -webkit-linear-gradient(#ff8717, var(--color-accent-orange)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
    html.light .gradient-text { background: none; -webkit-text-fill-color: var(--color-text-primary); }
    .copy-btn { color: var(--color-text-primary); background-color: var(--color-border); padding: 4px 8px; font-size: 10px; border-radius: 4px; margin-left: 8px; cursor: pointer; border: 1px solid var(--color-accent-orange); }
    .section-hidden { opacity: 0; transform: translateY(2rem); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
    .section-visible { opacity: 1; transform: translateY(0); }
    .price-flash-up { transition: color 0.1s; color: #10B981 !important; }
    .price-flash-down { transition: color 0.1s; color: #EF4444 !important; }
    html.light .price-flash-up, html.light .price-flash-down { color: #ffffff !important; background-color: var(--color-text-primary); }
  </style>
</head>
<body class="bg-bg-primary text-text-primary">

  <header class="w-full text-xs text-center py-2 border-b flex justify-between items-center px-4 sticky top-0 z-50 bg-bg-secondary border-border">
    <div class="flex items-center gap-2 text-accent-orange">
        <img src="https://updatedcardscript.standard.us-east-1.oortstorages.com/ChatGPT%20Image%20Aug%207%2C%202025%2C%2003_19_27%20PM.png" alt="Pumpdit Logo" class="h-6 w-6 rounded-full">
        <span>Live $PUMPDIT: <span id="pumpdit-price">$0.0000123</span></span>
    </div>
    <div class="flex items-center gap-4">
      <button id="theme-toggle" class="text-text-secondary hover:text-text-primary">
          <i id="theme-toggle-dark-icon" data-lucide="moon" class="w-5 h-5 hidden"></i>
          <i id="theme-toggle-light-icon" data-lucide="sun" class="w-5 h-5"></i>
      </button>
      <div id="wallet-status">
          <button onclick="openWalletModal()" id="connect-wallet-btn-header" class="bg-orange-600/50 text-white text-[10px] py-1 px-3 rounded-md hover:bg-orange-600/80">Connect Wallet</button>
          <span id="wallet-address" class="hidden text-accent-green"></span>
      </div>
    </div>
  </header>

  <div class="px-4 pt-6 max-w-xl mx-auto">
    <canvas id="priceChart"></canvas>
  </div>

  <section class="text-center px-6 section-block">
     <img src="https://updatedcardscript.standard.us-east-1.oortstorages.com/ChatGPT%20Image%20Aug%207%2C%202025%2C%2003_19_27%20PM.png" alt="Pumpdit Logo" class="h-24 w-24 mx-auto mb-6 rounded-full shadow-lg">
     <h1 id="hero-headline" class="text-3xl md:text-4xl mb-4 font-bold gradient-text inline-block"></h1>
     <p class="mt-4 text-lg max-w-2xl mx-auto text-text-secondary">The memecoin that turns Reddit clout into currency. Buy karma. Push narratives. Dominate subcultures.</p>
    <div class="mt-8 flex flex-col sm:flex-row justify-center items-center gap-4">
      <button onclick="document.getElementById('buy-section').scrollIntoView();" class="w-full sm:w-auto bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-full btn-glow text-base flex items-center justify-center gap-2">
        <i data-lucide="coins" class="w-5 h-5"></i> Buy $PUMPDIT
      </button>
      <button onclick="document.getElementById('order-section').scrollIntoView();" class="w-full sm:w-auto bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-8 rounded-full text-base flex items-center justify-center gap-2">
        <i data-lucide="bomb" class="w-5 h-5"></i> Deploy Karma Bomb
      </button>
    </div>
  </section>
  
  <div class="section-divider"></div>

  <section id="buy-section" class="text-center px-6 section-block section-hidden">
    <h2 class="text-3xl mb-8 font-bold gradient-text glitch-effect flex items-center justify-center gap-3"><i data-lucide="archive" class="w-8 h-8"></i> Get Your Ammo</h2>
    <div class="max-w-3xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-6 text-left text-sm">
        <div class="p-4 rounded-lg bg-bg-tertiary border border-border"><p class="text-accent-orange mb-2 text-lg">1. Get a Wallet</p><p class="text-text-secondary">Download Phantom or your wallet of choice from the app store or extension store.</p></div>
        <div class="p-4 rounded-lg bg-bg-tertiary border border-border"><p class="text-accent-orange mb-2 text-lg">2. Get SOL</p><p class="text-text-secondary">Buy Solana (SOL) on an exchange like Coinbase and send it to your wallet.</p></div>
        <div class="p-4 rounded-lg bg-bg-tertiary border border-border"><p class="text-accent-orange mb-2 text-lg">3. Swap for $PUMPDIT</p><p class="text-text-secondary">Go to <a href="https://raydium.io/swap/" target="_blank" class="text-accent-orange underline hover:text-white dark:hover:text-text-primary">Raydium</a> or <a href="https://jup.ag/swap/" target="_blank" class="text-accent-orange underline hover:text-white dark:hover:text-text-primary">Jupiter</a> and paste the token address.</p></div>
    </div>
    <div class="mt-8 p-4 rounded-lg max-w-3xl mx-auto bg-bg-tertiary border border-border">
        <p class="text-xs mb-2 text-text-secondary">Contract Address:</p>
        <div class="flex items-center justify-center">
            <input id="contractAddress" type="text" readonly value="PUMPDiT8VBdK1fK1y2e3b4c5d6e7f8g9hAjBkClDmEn" class="text-accent-green text-xs md:text-sm bg-transparent text-center w-auto">
            <button onclick="copyContract()" id="copyBtn" class="copy-btn">COPY</button>
        </div>
    </div>
  </section>
  
  <div class="section-divider"></div>

  <section class="text-center px-6 section-block section-hidden">
    <h2 class="text-3xl mb-8 font-bold gradient-text glitch-effect flex items-center justify-center gap-3"><i data-lucide="rocket" class="w-8 h-8"></i> Launch Sequence</h2>
    <div class="max-w-3xl mx-auto p-6 rounded-xl text-left space-y-6 bg-bg-tertiary border border-border">
        <div class="flex items-start gap-4"><p class="text-accent-orange text-lg">1.</p><div><h3 class="text-lg text-accent-orange">TARGET ACQUIRED</h3><p class="text-sm mt-1 text-text-secondary">You've landed on the launchpad. The Reddit algorithm is in your sights.</p></div></div>
        <div class="flex items-start gap-4"><p class="text-accent-orange text-lg">2.</p><div><h3 class="text-lg text-accent-orange">AUTHENTICATE ACCESS</h3><p class="text-sm mt-1 text-text-secondary">Connect your wallet to prove you're part of the operation. No spies allowed.</p></div></div>
        <div class="flex items-start gap-4"><p class="text-accent-orange text-lg">3.</p><div><h3 class="text-lg text-accent-orange">ARM THE PAYLOAD</h3><p class="text-sm mt-1 text-text-secondary">Choose your weapon from the arsenal—from a single spark to a full-scale narrative bomb.</p></div></div>
        <div class="flex items-start gap-4"><p class="text-accent-orange text-lg">4.</p><div><h3 class="text-lg text-accent-orange">SET COORDINATES</h3><p class="text-sm mt-1 text-text-secondary">Enter your target link and set the power level. A few $PUMPDIT is all it takes to make an impact.</p></div></div>
        <div class="flex items-start gap-4"><p class="text-accent-orange text-lg">5.</p><div><h3 class="text-lg text-accent-orange">EXECUTE MISSION</h3><p class="text-sm mt-1 text-text-secondary">Deploy your payload and watch the karma rain down. Mission accomplished.</p></div></div>
    </div>
  </section>

  <div class="section-divider"></div>

  <section class="text-center px-6 section-block section-hidden">
    <h2 class="text-3xl mb-8 font-bold gradient-text glitch-effect flex items-center justify-center gap-3"><i data-lucide="book-marked" class="w-8 h-8"></i> The Doctrine</h2>
    <div class="max-w-3xl mx-auto p-6 rounded-xl text-left space-y-6 bg-bg-tertiary border border-border">
        <div class="flex items-start gap-4"><i data-lucide="activity" class="w-8 h-8 flex-shrink-0 mt-1 text-accent-orange"></i><div><h3 class="text-lg text-accent-orange">Impact > Metrics</h3><p class="text-sm mt-1 text-text-secondary">We don't care about your balance sheet. We care about our footprint on the digital battlefield.</p></div></div>
        <div class="flex items-start gap-4"><i data-lucide="gem" class="w-8 h-8 flex-shrink-0 mt-1 text-accent-green"></i><div><h3 class="text-lg text-accent-green">Influence is the Final Asset</h3><p class="text-sm mt-1 text-text-secondary">Liquidity pools can be drained. A controlled narrative is forever.</p></div></div>
        <div class="flex items-start gap-4"><i data-lucide="file-terminal" class="w-8 h-8 flex-shrink-0 mt-1 text-accent-cyan"></i><div><h3 class="text-lg text-accent-cyan">Directives > Whitepapers</h3><p class="text-sm mt-1 text-text-secondary">Our roadmap isn't a 90-page PDF. It's a series of tactical targets delivered to the War Council.</p></div></div>
        <div class="flex items-start gap-4"><i data-lucide="megaphone" class="w-8 h-8 flex-shrink-0 mt-1 text-accent-purple"></i><div><h3 class="text-lg text-accent-purple">Propaganda Pays</h3><p class="text-sm mt-1 text-text-secondary">The best memes and shitposts that support the cause will be rewarded from the treasury. This isn't just a game; it's a career.</p></div></div>
        <div class="flex items-start gap-4"><i data-lucide="shield-off" class="w-8 h-8 flex-shrink-0 mt-1 text-accent-red"></i><div><h3 class="text-lg text-accent-red">No Kings, No Founders</h3><p class="text-sm mt-1 text-text-secondary">This protocol was deployed anonymously from a secure bunker. There are no dev wallets, no team tokens—only the mission.</p></div></div>
    </div>
  </section>
  
  <div class="section-divider"></div>

  <section class="text-center px-6 section-block section-hidden">
    <h2 class="text-3xl mb-8 font-bold gradient-text glitch-effect flex items-center justify-center gap-3"><i data-lucide="archive" class="w-8 h-8"></i> The Arsenal</h2>
    <div class="max-w-3xl mx-auto p-6 rounded-xl text-left space-y-6 bg-bg-tertiary border border-border">
        <div class="flex items-start gap-4"><i data-lucide="package-plus" class="w-8 h-8 flex-shrink-0 mt-1 text-accent-orange"></i><div><h3 class="text-lg text-accent-orange">Supply Drop: 1B $PUMPDIT</h3><p class="text-sm mt-1 text-text-secondary">A fixed billion rounds. No more, no less. Enough ammo for a hostile takeover of the front page.</p></div></div>
        <div class="flex items-start gap-4"><i data-lucide="percent-circle" class="w-8 h-8 flex-shrink-0 mt-1 text-accent-green"></i><div><h3 class="text-lg text-accent-green">Tribute: 0% Buy / 0% Sell</h3><p class="text-sm mt-1 text-text-secondary">This is a black market, not the stock market. Your transactions are yours. We don't take a cut.</p></div></div>
        <div class="flex items-start gap-4"><i data-lucide="flame" class="w-8 h-8 flex-shrink-0 mt-1 text-accent-red"></i><div><h3 class="text-lg text-accent-red">Scorched Earth: LP Tokens Burned</h3><p class="text-sm mt-1 text-text-secondary">The escape route has been destroyed. The devs can't pull the rug because there is no rug. Only concrete.</p></div></div>
        <div class="flex items-start gap-4"><i data-lucide="key-round" class="w-8 h-8 flex-shrink-0 mt-1 text-accent-purple"></i><div><h3 class="text-lg text-accent-purple">Utility: Access Granted</h3><p class="text-sm mt-1 text-text-secondary">Holding $PUMPDIT is your keycard to the weapons locker. Deploy upvotes, comments, and narrative nukes directly from our terminal.</p></div></div>
        <div class="flex items-start gap-4"><i data-lucide="swords" class="w-8 h-8 flex-shrink-0 mt-1 text-accent-cyan"></i><div><h3 class="text-lg text-accent-cyan">Governance: The War Council</h3><p class="text-sm mt-1 text-text-secondary">Major holders get a seat at the table to vote on new targets, features, and strategic treasury deployments. This is your cartel now.</p></div></div>
    </div>
  </section>

  <div class="section-divider"></div>

  <section id="order-section" class="text-center px-6 section-block section-hidden">
    <h2 class="text-3xl mb-2 font-bold gradient-text glitch-effect flex items-center justify-center gap-3"><i data-lucide="wrench" class="w-8 h-8"></i> Pick Your Poison</h2>
    <p class="mb-8 text-text-secondary">Want fake fans or real fire?</p>
    <div class="max-w-xl mx-auto p-6 rounded-xl bg-bg-secondary border border-border">
      <label class="block text-sm text-accent-orange mb-2 text-left">SERVICE:</label>
      <select id="orderService" class="w-full p-3 mb-4 rounded border text-sm bg-bg-tertiary border-border text-text-primary">
        <option value="2.50">100 Upvotes (The Spark)</option> <option value="8.50">500 Upvotes (Trending Push)</option>
        <option value="12.00">100 AI Comments (Narrative Control)</option> <option value="22.00">1000 Subscribers (Cult Building)</option>
        <option value="35.00">Custom Hype Thread (The Nuclear Option)</option>
      </select>
      <label class="block text-sm text-accent-orange mb-2 text-left">LINK:</label>
      <input type="url" id="postLink" class="w-full p-3 mb-4 rounded border text-sm bg-bg-tertiary border-border text-text-primary" placeholder="https://reddit.com/r/subreddit/your_post" required />
      <label class="block text-sm text-accent-orange mb-2 text-left">QUANTITY:</label>
      <input type="number" id="orderQty" class="w-full p-3 mb-4 rounded border text-sm bg-bg-tertiary border-border text-text-primary" value="1" min="1" />
      <div class="text-sm mb-6 text-text-secondary">
        COST: <span id="orderTotalUSD" class="font-bold text-accent-green"></span> USD (<span id="orderTotal" class="font-bold text-accent-green">Loading...</span> $PUMPDIT)
        <p class="text-xs mt-2">"Use $PUMPDIT to hijack the hot tab."</p>
      </div>
      <button onclick="placeOrder()" class="bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-8 rounded-full btn-glow w-full flex items-center justify-center gap-2">
        Place Order <i data-lucide="rocket" class="w-5 h-5"></i>
      </button>
    </div>
  </section>

  <section class="text-center px-6 section-block section-hidden">
      <h2 class="text-3xl mb-8 font-bold gradient-text glitch-effect flex items-center justify-center gap-3"><i data-lucide="satellite-dish" class="w-8 h-8"></i> Live Ops Tracker</h2>
      <div id="ops-container" class="max-w-3xl mx-auto space-y-3 text-xs text-left"></div>
  </section>

  <div class="section-divider"></div>
  
  <section class="text-center px-6 section-block section-hidden">
    <h2 class="text-3xl mb-8 font-bold gradient-text glitch-effect flex items-center justify-center gap-3">
      <i data-lucide="users" class="w-8 h-8"></i> Join The Uprising
    </h2>
    <p class="mb-8 max-w-xl mx-auto text-text-secondary">Influence is a team sport. Find us on the front lines.</p>
    <div class="flex justify-center items-center gap-6">
      <a href="#" target="_blank" class="text-accent-orange hover:text-white dark:hover:text-text-primary transition-colors" aria-label="X/Twitter"><svg class="w-10 h-10" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>X</title><path fill="currentColor" d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932L18.901 1.153zm-1.61 19.713h2.436L4.178 2.547H1.641l15.65 18.319z"/></svg></a>
      <a href="#" target="_blank" class="text-accent-orange hover:text-white dark:hover:text-text-primary transition-colors" aria-label="Telegram"><svg class="w-10 h-10" fill="currentColor" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg"><title>Telegram</title><path d="M11.944,0 C5.356,0 0,5.356 0,11.944 C0,18.531 5.356,23.888 11.944,23.888 C18.531,23.888 23.888,18.531 23.888,11.944 C23.888,5.356 18.531,0 11.944,0 Z M18.118,8.113 C17.843,9.519 16.52,15.803 15.938,18.55 C15.66,19.928 14.82,20.285 14.045,19.838 C12.83,19.125 11.884,18.393 10.97,17.703 C9.96,16.942 9.25,16.485 9.065,16.149 C8.879,15.813 8.221,15.356 8.221,14.638 C8.221,13.831 8.793,13.475 9.365,12.903 C9.938,12.331 10.643,11.668 11.438,10.925 C12.212,10.203 12.988,9.48 13.118,9.25 C13.248,9.02 13.356,8.663 13.16,8.445 C12.964,8.228 12.638,8.356 12.43,8.475 C12.221,8.594 10.43,9.663 7.938,11.243 C7.545,11.5 7.153,11.625 6.76,11.625 C6.273,11.625 5.5,11.453 4.938,11.28 C4.26,11.063 3.653,10.913 3.8,10.138 C3.893,9.663 4.43,9.228 5.43,8.835 C8.303,7.703 10.545,6.77 12.118,6.163 C15.653,4.83 17.03,4.438 18.118,8.113 Z"/></svg></a>
    </div>
  </section>

  <div id="orderModal" class="modal"><div class="modal-content"><h2 class="text-xl mb-4 flex items-center justify-center gap-2 text-accent-orange"><i data-lucide="receipt" class="w-6 h-6"></i>Your Order Is Live</h2><p class="text-sm mb-4 text-text-primary">Let the karma rain begin.</p><div id="order-summary" class="text-left text-sm p-4 rounded-lg mb-4 bg-bg-tertiary"></div><p id="tx-hash" class="text-accent-green text-xs break-all"></p><button onclick="closeOrderModal()" class="mt-6 px-4 py-2 bg-orange-500 text-white font-bold rounded-full">Roger That</button></div></div>
  <div id="walletModal" class="modal"><div class="modal-content" id="wallet-modal-content"></div></div>
  <div id="easterEgg" style="display:none; position:fixed; bottom:20px; right:20px; font-size:14px; padding:8px 12px; border-radius:6px; z-index:1000;" class="bg-bg-tertiary border border-border"><span class="flex items-center gap-2"><i data-lucide="egg" class="w-4 h-4"></i>Bonus: +10 Upvotes!</span></div>
  <footer class="text-center py-10 text-xs border-t mt-8 text-text-secondary border-border"><p>© 2025 $PUMPDIT | A protocol for weaponized attention.</p><p class="mt-2 flex items-center justify-center gap-2">Just pump. <i data-lucide="rocket" class="w-4 h-4"></i></p></footer>

  <script>
    let priceChart; let lockedPrice = 0.0000123; let priceTimestamp = Date.now();
    let walletConnected = false; let walletAddress = '';
    let priceDisplay, chartCtx, walletModal, walletModalContent, orderModal, opsContainer;
    
    function loadIcons() { lucide.createIcons(); }

    const sampleServices = [{ name: '500 Upvotes', class: 'text-accent-orange', value: '+500' }, { name: '100 AI Comments', class: 'text-accent-orange', value: '+100' },{ name: 'Cult Building', class: 'text-accent-orange', value: '+1000' }, { name: 'The Spark', class: 'text-accent-orange', value: '+100' },{ name: 'Trending Push', class: 'text-accent-orange', value: '+500' }];
    const sampleSubreddits = ['r/CryptoMoonShots', 'r/wallstreetbets', 'r/solana', 'r/memes', 'r/satoshistreetbets'];

    function createRandomOp() {
        if (!opsContainer) return;
        const randomAddress = `0x...${[...Array(4)].map(() => Math.floor(Math.random() * 16).toString(16)).join('')}`;
        const randomService = sampleServices[Math.floor(Math.random() * sampleServices.length)];
        const randomSubreddit = sampleSubreddits[Math.floor(Math.random() * sampleSubreddits.length)];
        const opElement = document.createElement('div');
        opElement.className = 'bg-bg-tertiary border border-border p-3 rounded-lg flex justify-between items-center transition-all duration-500 opacity-0 -translate-y-4';
        opElement.innerHTML = `<span>${randomAddress} deployed <span class="${randomService.class}">${randomService.name}</span> on ${randomSubreddit}</span><span class="text-accent-green">${randomService.value}</span>`;
        opsContainer.prepend(opElement);
        setTimeout(() => opElement.classList.remove('opacity-0', '-translate-y-4'), 100);
        
        // --- THIS IS THE DEFINITIVE FIX FOR THE LIVE OPS CUTOFF ---
        // It ensures only the 7 most recent items are ever displayed.
        if (opsContainer.children.length > 7) {
            opsContainer.lastChild.classList.add('opacity-0');
            setTimeout(() => opsContainer.removeChild(opsContainer.lastChild), 500);
        }
    }

    const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => { if (entry.isIntersecting) { entry.target.classList.add('section-visible'); } });
    });

    function updateOrderTotal() {
      if (!document.getElementById('orderService')) return;
      const serviceSelect = document.getElementById('orderService');
      const serviceCostUSD = parseFloat(serviceSelect.value);
      const qty = parseInt(document.getElementById('orderQty').value) || 1;
      const totalUSD = serviceCostUSD * qty;
      const totalPumpdit = lockedPrice > 0 ? Math.ceil(totalUSD / lockedPrice).toLocaleString() : '...';
      document.getElementById('orderTotalUSD').textContent = `$${totalUSD.toFixed(2)}`;
      document.getElementById('orderTotal').textContent = totalPumpdit;
    }

    function updateLivePrice() {
      const now = Date.now();
      if (now - priceTimestamp >= 1500) {
        let oldPrice = lockedPrice;
        lockedPrice = lockedPrice * (1 + (Math.random() - 0.5) * 0.1); 
        if (lockedPrice < 0.000001) { lockedPrice = 0.000001; }
        priceTimestamp = now;

        priceDisplay.classList.remove('price-flash-up', 'price-flash-down');
        if (lockedPrice > oldPrice) { priceDisplay.classList.add('price-flash-up'); } 
        else if (lockedPrice < oldPrice) { priceDisplay.classList.add('price-flash-down'); }
        setTimeout(() => { priceDisplay.classList.remove('price-flash-up', 'price-flash-down'); }, 500);
      }
      if (priceDisplay) { priceDisplay.textContent = `$${lockedPrice.toFixed(8)}`; }
      if (priceChart) {
          const data = priceChart.data.datasets[0].data;
          data.push(lockedPrice);
          if (data.length > 40) data.shift();
          priceChart.update('quiet');
      }
      updateOrderTotal();
    }

    function placeOrder() {
        if (!walletConnected) { openWalletModal(); return; }
        const postLinkInput = document.getElementById('postLink');
        const postLink = postLinkInput.value;
        if (!postLink) { alert('Please provide a target link for your order.'); postLinkInput.focus(); return; }
        const serviceSelect = document.getElementById('orderService');
        const serviceText = serviceSelect.options[serviceSelect.selectedIndex].text;
        const qty = document.getElementById('orderQty').value;
        const totalPumpdit = document.getElementById('orderTotal').textContent;
        document.getElementById('order-summary').innerHTML = `<p class="mb-2"><strong>Service:</strong> <span class="text-accent-orange">${serviceText}</span></p><p class="mb-2"><strong>Target Link:</strong> <span class="text-accent-orange break-all text-xs">${postLink}</span></p><p class="mb-2"><strong>Quantity:</strong> <span class="text-accent-orange">${qty}</span></p><p><strong>Total Cost:</strong> <span class="text-accent-green">${totalPumpdit} $PUMPDIT</span></p>`;
        document.getElementById('tx-hash').textContent = `Fake TxHash: 0xPUMPED${Math.floor(Math.random() * 1e9).toString(16)}`;
        orderModal.style.display = 'flex';
        loadIcons();
    }

    function closeOrderModal() { if(orderModal) orderModal.style.display = 'none'; }
    function openWalletModal() { let content = ''; if (walletConnected) { content = `<h2 class="text-xl text-accent-green mb-4 flex items-center justify-center gap-2"><i data-lucide="check-circle" class="w-6 h-6"></i>Wallet Connected</h2><p class="text-text-primary text-sm mb-2">Your address:</p><p class="text-accent-green text-xs break-all">${walletAddress}</p><button onclick="disconnectWallet()" class="mt-6 px-4 py-2 bg-red-500 text-white font-bold rounded-full">Disconnect</button>`; } else { content = `<h2 class="text-xl text-accent-orange mb-4 flex items-center justify-center gap-2"><i data-lucide="lock" class="w-6 h-6"></i>Connect Wallet</h2><p class="text-text-primary text-sm mb-6">Link up so we know you’re not a bot (yet).</p><button onclick="connectWallet()" class="w-full mb-4 px-4 py-3 bg-orange-500 text-white font-bold rounded-full btn-glow">Connect Now</button><button onclick="closeWalletModal()" class="w-full px-4 py-2 bg-gray-600 text-white font-bold rounded-full">Cancel</button>`; } if(walletModalContent) walletModalContent.innerHTML = content; if(walletModal) walletModal.style.display = 'flex'; loadIcons(); }
    function closeWalletModal() { if(walletModal) walletModal.style.display = 'none'; }
    function connectWallet() { walletConnected = true; walletAddress = '0x' + [...Array(40)].map(() => Math.floor(Math.random() * 16).toString(16)).join(''); const shortAddress = `${walletAddress.substring(0, 6)}...${walletAddress.substring(walletAddress.length - 4)}`; document.getElementById('wallet-address').textContent = shortAddress; document.getElementById('wallet-address').classList.remove('hidden'); document.getElementById('connect-wallet-btn-header').classList.add('hidden'); closeWalletModal(); }
    function disconnectWallet() { walletConnected = false; walletAddress = ''; document.getElementById('wallet-address').classList.add('hidden'); document.getElementById('connect-wallet-btn-header').classList.remove('hidden'); closeWalletModal(); }
    function copyContract() { navigator.clipboard.writeText(document.getElementById('contractAddress').value).then(() => { const copyBtn = document.getElementById('copyBtn'); copyBtn.textContent = 'COPIED!'; setTimeout(() => { copyBtn.textContent = 'COPY'; }, 2000); }).catch(err => console.error('Failed to copy text: ', err)); }

    const headline = document.getElementById('hero-headline');
    const text = "Weaponized Influence.";
    function typeEffect() { headline.textContent = ""; headline.classList.add('typing-anim'); headline.textContent = text; }
    
    // --- THEME TOGGLE SCRIPT ---
    const themeToggleBtn = document.getElementById('theme-toggle');
    const darkIcon = document.getElementById('theme-toggle-dark-icon');
    const lightIcon = document.getElementById('theme-toggle-light-icon');
    
    function applyTheme(theme) {
        if (theme === 'dark') {
            document.documentElement.classList.add('dark');
            darkIcon.classList.remove('hidden');
            lightIcon.classList.add('hidden');
        } else {
            document.documentElement.classList.remove('dark');
            lightIcon.classList.remove('hidden');
            darkIcon.classList.add('hidden');
        }
        updateChartTheme();
    }

    themeToggleBtn.addEventListener('click', function() {
        const isDark = document.documentElement.classList.toggle('dark');
        localStorage.setItem('color-theme', isDark ? 'dark' : 'light');
        applyTheme(isDark ? 'dark' : 'light');
    });

    // --- CHART THEME ---
    function updateChartTheme() {
        if (!priceChart) return;
        const isDark = document.documentElement.classList.contains('dark');
        priceChart.options.scales.y.ticks.color = isDark ? '#9ca3af' : 'var(--color-text-secondary)';
        priceChart.data.datasets[0].borderColor = isDark ? '#ff8717' : 'var(--color-accent-orange)';
        priceChart.data.datasets[0].backgroundColor = isDark ? 'rgba(255,135,23,0.1)' : 'rgba(0, 255, 0, 0.1)';
        priceChart.update();
    }

    window.onload = () => {
        priceDisplay = document.getElementById('pumpdit-price');
        chartCtx = document.getElementById('priceChart').getContext('2d');
        walletModal = document.getElementById('walletModal');
        walletModalContent = document.getElementById('wallet-modal-content');
        orderModal = document.getElementById('orderModal');
        opsContainer = document.getElementById('ops-container');

        priceChart = new Chart(chartCtx, { type: 'line', data: { labels: Array(40).fill(''), datasets: [{ label: '$PUMPDIT', data: Array(40).fill(lockedPrice), tension: 0.4, borderWidth: 2, pointRadius: 0 }] }, options: { scales: { y: { beginAtZero: false, ticks: { font: { size: 8, family: "'Press Start 2P', cursive" } } }, x: { ticks: { display: false } } }, plugins: { legend: { display: false } } } });
        
        // SET INITIAL THEME
        const initialTheme = localStorage.getItem('color-theme') || 'dark';
        applyTheme(initialTheme);
        
        loadIcons();
        typeEffect();
        const hiddenElements = document.querySelectorAll('.section-hidden');
        hiddenElements.forEach((el) => observer.observe(el));
        
        for(let i = 0; i < 3; i++) { createRandomOp(); }
        setInterval(createRandomOp, 4000);

        document.getElementById('orderService').addEventListener('change', updateOrderTotal);
        document.getElementById('orderQty').addEventListener('input', updateOrderTotal);
        document.addEventListener('keydown', (e) => { if (e.key.toLowerCase() === 'j') { const egg = document.getElementById('easterEgg'); egg.style.display = 'block'; loadIcons(); setTimeout(() => { egg.style.display = 'none' }, 3000); } });

        updateOrderTotal();
        setInterval(updateLivePrice, 1500);
    };
  </script>
</body>
</html>
